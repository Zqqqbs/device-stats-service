# Device Stats Service

## Описание проекта

Сервис для учёта и анализа данных устройств. Позволяет добавлять данные устройств и получать аналитику за всё время или за заданный период. Данные хранятся в базе данных SQLite, а анализ выполняется асинхронно с использованием Celery и Redis. Дополнительно реализована работа с пользователями (необязательная часть ТЗ), позволяющая связывать устройства с пользователями и получать аналитику по пользователям.

Проект разработан в рамках тестового задания на стажировку "ИТ-Старт" и включает:
- REST API на FastAPI с документацией через Swagger UI.
- Асинхронную обработку задач через Celery.
- Нагрузочное тестирование через Locust.
- Хранение данных в SQLite.

## Ссылка на репозиторий

Проект размещён на GitHub. Ссылка на репозиторий:

https://github.com/Zqqqbs/device-stats-service/

## Технологии

- **FastAPI**: для создания REST API.
- **SQLAlchemy**: для работы с базой данных SQLite.
- **Celery**: для асинхронной обработки задач.
- **Redis**: как брокер сообщений и бэкенд для Celery.
- **Locust**: для нагрузочного тестирования.
- **Docker и Docker Compose**: для контейнеризации и упрощения запуска.

## Структура проекта

- `app/` — основная директория приложения:
  - `main.py` — основной файл FastAPI-приложения.
  - `crud.py` — функции для работы с базой данных.
  - `database.py` — настройка базы данных.
  - `models.py` — модели SQLAlchemy.
  - `schemas.py` — Pydantic-схемы для валидации данных.
  - `tasks.py` — асинхронные задачи Celery.
- device_stats.db база данных SQLite.
- `locust/` — директория для файлов, связанных с нагрузочным тестированием:
  - `locustfile.py` — сценарий нагрузочного теста.
  - `locust_load_test_report.html` — HTML-отчёт с результатами тестирования.
- `docker-compose.yml` — конфигурация Docker Compose.
- `Dockerfile` — Dockerfile для сборки контейнеров.
- `requirements.txt` — зависимости проекта.

## Установка и запуск

### Требования

- Установленный [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/).
- (Опционально) Python 3.9+ и виртуальное окружение для запуска Locust локально.
